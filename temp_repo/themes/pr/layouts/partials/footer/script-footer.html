{{ partial "main/ga.html" . }}
{{ partial "footer/esbuild" (dict "src" "netlify-identity-widget.js" "load" "async" "transpile" false) -}}

{{ partial "footer/esbuild" (dict "src" "js/app.js" "targetPath" "main.js" "load" "async" "transpile" false) -}}

{{/* EXAMPLE - only load script for production 
{{ if eq (hugo.Environment) "production" -}}
  {{ partial "footer/esbuild" (dict "src" "js/instantpage.js" "load" "async" "transpile" false) -}}
{{ end -}}
*/}}

{{/* EXAMPLE - only load script for a page type e.g. contact or gallery
{{ if eq .Type "gallery" }}
  {{ partial "footer/esbuild" (dict "src" "js/gallery.js" "load" "async" "transpile" false) -}}
{{ end }}
*/}}

{{/* Only load script for a page type newswire */}}
{{ if eq .Type "newswire" }}
    {{ partial "footer/esbuild" (dict "src" "js/gallery.js" "load" "async" "transpile" false) -}}
{{ end }}

{{ if .HasShortcode "gallery" }}
    {{ partial "footer/esbuild" (dict "src" "js/gallery.js" "load" "async" "transpile" false) -}}
{{ end }}

{{ if .HasShortcode "search" -}}
    {{ partial "footer/esbuild" (dict "src" "js/search.js" "load" "async" "transpile" false) -}}
{{ end -}}

{{ if eq .Params.layout "map" }}
    {{ partial "footer/esbuild" (dict "src" "leaflet.js" "load" "async" "transpile" false) -}}
    {{ partial "footer/esbuild" (dict "src" "leaflet.markercluster.js" "load" "async" "transpile" false) -}}
    {{ partial "footer/esbuild" (dict "src" "leaflet-gesture-handling.min.js" "load" "async" "transpile" false) -}}
    {{ partial "footer/esbuild" (dict "src" "js/map.js" "load" "async" "transpile" false) -}}
{{ end }}

{{ partial "footer/esbuild" (dict "src" "js/glide.js" "load" "async" "transpile" false) -}}

{{ partial "footer/esbuild" (dict "src" "js/newsletter_popup.js" "load" "async" "transpile" false) -}}

<script nonce="dXNlcj0iaGVsbG8iLGRvbWFpbj0iaGVua3ZlcmxpbmRlLmNvbSIsZG9jdW1lbnQud3JpdGUodXNlcisiQCIrZG9tYWluKTs=">
  // Burger menus
  document.addEventListener('DOMContentLoaded', function () {
      // open
      const burger = document.querySelectorAll('.navbar-burger');
      const menu = document.querySelectorAll('.navbar-menu');

      if (burger.length && menu.length) {
          for (var i = 0; i < burger.length; i++) {
              burger[i].addEventListener('click', function () {
                  for (var j = 0; j < menu.length; j++) {
                      menu[j].classList.toggle('hidden');
                  }
              });
          }
      }

      // close
      const close = document.querySelectorAll('.navbar-close');
      const backdrop = document.querySelectorAll('.navbar-backdrop');

      if (close.length) {
          for (var i = 0; i < close.length; i++) {
              close[i].addEventListener('click', function () {
                  for (var j = 0; j < menu.length; j++) {
                      menu[j].classList.toggle('hidden');
                  }
              });
          }
      }

      if (backdrop.length) {
          for (var i = 0; i < backdrop.length; i++) {
              backdrop[i].addEventListener('click', function () {
                  for (var j = 0; j < menu.length; j++) {
                      menu[j].classList.toggle('hidden');
                  }
              });
          }
      }
  });
</script>

