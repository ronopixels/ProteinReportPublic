{{ $image := .Page.Resources.GetMatch .Params.featured_image }}

<article class="flex items-center bg-white transition hover:shadow-xl border">
    <div class="hidden rotate-180 p-2 [writing-mode:_vertical-lr]">
        <time datetime="{{ .PublishDate.Format " 2006-01-02" }}"
            class="flex items-center justify-between gap-4 text-xs font-bold uppercase text-gray-900">
            <span>{{ .PublishDate.Format "2006" }}</span>
            <span class="w-px flex-1 bg-gray-900/10"></span>
            <span>{{ .PublishDate.Format "Jan 2" }}</span>
        </time>
    </div>

    <div class="p-4 border-r-2 basis-24 sm:basis-36 flex items-center justify-center">
        <time datetime="{{ .PublishDate.Format " 2006-01-02" }}"
            class="flex flex-col w-full items-center justify-center font-bold text-sm text-gray-900">
            <span class="uppercase w-full border-b-2 text-center">{{ dateFormat "Jan" .Params.start_date }}</span>
            <span class="text-5xl sm:text-7xl">{{ dateFormat "2" .Params.start_date }}</span>
        </time>
    </div>

    <div class="flex flex-1 flex-col justify-center">
        <div class="border-s border-gray-900/10 p-4 sm:border-l-transparent sm:p-6">
            <a href="{{ .RelPermalink }}">
                <h3 class="font-bold uppercase text-gray-900">
                    {{ .Params.title }}
                </h3>
            </a>

            <div class="flex flex-row flex-wrap gap-4 mt-2 line-clamp-3 text-sm/relaxed text-gray-700">
                {{ partial "event/location.html" . }}
                <div class="flex flex-row flex-wrap items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5m-9-6h.008v.008H12v-.008zM12 15h.008v.008H12V15zm0 2.25h.008v.008H12v-.008zM9.75 15h.008v.008H9.75V15zm0 2.25h.008v.008H9.75v-.008zM7.5 15h.008v.008H7.5V15zm0 2.25h.008v.008H7.5v-.008zm6.75-4.5h.008v.008h-.008v-.008zm0 2.25h.008v.008h-.008V15zm0 2.25h.008v.008h-.008v-.008zm2.25-4.5h.008v.008H16.5v-.008zm0 2.25h.008v.008H16.5V15z" />
                    </svg> 
                    <small>{{ partial "event/date_range.html" . }}</small>
                </div>
            </div>

            <p class="hidden mt-2 line-clamp-3 text-sm/relaxed text-gray-700">
                {{ .Params.excerpt | safeHTML | truncate 100 }}
            </p>
        </div>
    </div>
    <a href="{{ .RelPermalink }}" class="hidden p-4 sm:block sm:basis-56">
        {{ if $image }}
            {{ if .Site.Params.hyas_images }}
                {{ partial "picture" (dict
                "ctx" .
                "src" $image
                "alt" .Title
                "widths" (slice 40 70 150 224 480)
                "class" "img-fluid blur-up aspect-video w-full object-contain"
                )}}
            {{ else }}
                <img src="{{ $image.RelPermalink }}" class="aspect-video w-full object-contain">
            {{ end }}
        {{ end }}
    </a>
</article>